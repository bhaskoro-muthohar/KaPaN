version: 0.2

phases:
  pre_build:
    commands:
      - echo "Pre-build phase"
  build:
    commands:
      - echo "Build phase"
      - echo "Creating a zip with the Dockerfile at the root."
      - git archive --format=zip HEAD > application.zip
      - unzip application.zip -d unpacked
  post_build:
    commands:
      - echo "Post-build phase"
      - echo "Post-build completed on `date`"

artifacts:
  files:
    - '**/*'
  discard-paths: yes
  base-directory: 'unpacked'
